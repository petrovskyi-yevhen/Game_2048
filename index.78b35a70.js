function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var r,n=document.querySelector("button"),o=document.querySelector(".message-start"),a=document.querySelector(".message-win"),c=document.querySelector(".message-lose"),i=document.querySelector(".game-score"),u=document.querySelectorAll(".field-row"),s=0,l=!1,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function d(t){switch(r=f,t.key){case"ArrowLeft":v();break;case"ArrowRight":h();break;case"ArrowDown":p(),h(),p();break;case"ArrowUp":p(),v(),p();break;default:return}for(var n=0;n<4;n++)for(var o=0;o<4;o++)r[n][o]!==f[n][o]&&(f=r,m(),y());l&&a.classList.remove("hidden"),g()||(p(),function(){for(var t=function(t){if(r[t].some(function(e,n){return e===r[t][n+1]}))return{v:!0}},n=0;n<4;n++){var o=t(n);if("object"===e(o))return o.v}return!1}())||(c.classList.remove("hidden"),document.removeEventListener("keydown",d))}function m(){var e,r,n=(e=[],f.forEach(function(t,r){t.forEach(function(t,n){0===t&&e.push([r,n])})}),function(t){if(Array.isArray(t))return t}(r=e[Math.floor(Math.random()*e.length)])||function(t,e){var r,n,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],c=!0,i=!1;try{for(o=o.call(t);!(c=(r=o.next()).done)&&(a.push(r.value),2!==a.length);c=!0);}catch(t){i=!0,n=t}finally{try{c||null==o.return||o.return()}finally{if(i)throw n}}return a}}(r,2)||function(e,r){if(e){if("string"==typeof e)return t(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];f[o][a]=.9>Math.random()?2:4}function y(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){var r=u[t].children[e],n=f[t][e];0===n?(r.textContent="",r.className="field-cell"):(r.textContent=n,r.className="field-cell field-cell--".concat(n))}i.textContent=s}function v(){g()&&(r=r.map(function(t){var e=t.filter(function(t){return 0!==t});return e.forEach(function(t,r){t===e[r+1]&&(e[r]*=2,e.splice(r+1,1),s+=e[r],2048===e[r]&&(l=!0))}),e.concat(Array(4-e.length).fill(0))}))}function h(){g()&&(b(),v(),b())}function b(){r.forEach(function(t){return t.reverse()})}function p(){r=r[0].map(function(t,e){return r.map(function(t){return t[e]})})}function g(){for(var t=function(t){if(r[t].some(function(t){return 0===t})||r[t].some(function(e,n){return e===r[t][n+1]}))return{v:!0}},n=0;n<4;n++){var o=t(n);if("object"===e(o))return o.v}return!1}n.addEventListener("click",function(t){document.addEventListener("keydown",d),n.classList.contains("start")?(n.classList.replace("start","restart"),n.innerText="Restart",o.classList.add("hidden")):(l=!1,s=0,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],c.classList.contains("hidden")||c.classList.add("hidden"),a.classList.contains("hidden")||a.classList.add("hidden")),m(),m(),y()});
//# sourceMappingURL=index.78b35a70.js.map
